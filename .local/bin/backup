#!/bin/bash

if [[ -d /mnt/drive/Backup ]]; then
    :
elif [[ -L /dev/disk/by-label/sam-barr-hdd ]]; then
    read -p "Your hard drive is plugged in but not mounted. Would you like to mount it? [yN] " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Yy]$ ]]; then
        mount -L sam-barr-hdd
        did_mount=true
    else
        exit
    fi
else
    echo Please plugin your hard drive
    exit
fi

borg create /mnt/drive/Backup::"$(date +%d_%m_%Y)" "$HOME"

if [[ "$did_mount" = true ]]; then
    read -p "Do you wish to unmount your hard drive? [yN] " -n 1 -r
    echo
    if [[ $REPLY  =~ ^[Yy]$ ]]; then
        umount /mnt/drive
    fi
fi

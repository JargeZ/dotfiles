#!/bin/bash

aur_dir=$HOME/.local/aur

ignore=( "xmobar-lite" "keynav-git")

declare -A arr
for pkg in "${ignore[@]}"
do
    arr[$aur_dir/$pkg/]=1
done

for pkg in "$aur_dir"/*/;
do
    if [[ ${arr[$pkg]} ]];
    then
        continue
    fi

    if [[ "$(git -C "$pkg" pull)" == "Already up to date." ]];
    then
        echo "$(basename "$pkg")" is up to date.
    else
        echo "$(basename "$pkg")" has an update.
        (cd "$pkg" && makepkg -sricf)
    fi
done
